(()=>{"use strict";const t=class{constructor(t=0,s=0,i=10,h=10,e="#FFFFFF"){this.x=t,this.y=s,this.width=i,this.height=h,this.color=e}moveTo(t,s){this.x=t,this.y=s}render(t){t.beginPath(),t.rect(this.x,this.y,this.width,this.height),t.fillStyle=this.color,t.fill(),t.closePath()}},s=class extends t{constructor(t,s,i=2,h=-2,e=10,l){super(t,s,2*e,2*e,l),this.dx=i,this.dy=h,this.radius=e,this.canvasWidth=480,this.PI2=2*Math.PI}move(){(this.x+this.dx>this.canvasWidth-this.radius||this.x+this.dx<this.radius)&&(this.dx=-this.dx)}render(t){t.beginPath(),t.arc(this.x,this.y,this.radius,0,this.PI2),t.fillStyle=this.color,t.fill(),t.closePath()}},i=class extends t{constructor(t,s,i,h,e){super(t,s,i,h,e),this.status=1}},h=class extends t{constructor(t,s,i,h="#FCAF3B",e="16px Helvetica"){super(s,i,0,0,h),this.text=t,this.font=e,this.value=0}render(t){t.font=this.font,t.fillStyle=this.color,t.fillText(`${this.text} ${this.value}`,this.x,this.y)}};new class{constructor(e){this.canvas=document.getElementById(e),this.ctx=this.canvas.getContext("2d"),this.paddleHeight=10,this.paddleWidth=75,this.paddleXStart=(this.canvas.width-this.paddleWidth)/2,this.paddleYStart=this.canvas.height-this.paddleHeight,this.brickRowCount=5,this.brickColumnCount=7,this.ARROW_RIGHT="ArrowRight",this.ARROW_LEFT="ArrowLeft",this.RIGHT="RIGHT",this.LEFT="LEFT",this.gameOverMessage="GAME OVER",this.winMessage="YOU WIN, CONGRATULATIONS!",this.ball=new s(this.canvas.width/2,this.canvas.height-30),this.bricks=new class{constructor(t,s,i=50,h=20,e=10,l=30,a=30,d="#FCAF3B"){this.cols=t,this.rows=s,this.width=i,this.height=h,this.padding=e,this.offsetTop=l,this.offsetLeft=a,this.color=d,this.bricks=[],this.init()}init(){for(let t=0;t<this.cols;t+=1){this.bricks[t]=[];for(let s=0;s<this.rows;s+=1){const h=t*(this.width+this.padding)+this.offsetLeft,e=s*(this.height+this.padding)+this.offsetTop;this.bricks[t][s]=new i(h,e,this.width,this.height,this.color)}}}render(t){for(let s=0;s<this.cols;s+=1)for(let i=0;i<this.rows;i+=1){const h=this.bricks[s][i];1===this.bricks[s][i].status&&h.render(t)}}}(this.brickColumnCount,this.brickRowCount),this.paddle=new t(this.paddleXStart,this.paddleYStart,this.paddleWidth,this.paddleHeight,"#FCAF3B"),this.scoreLabel=new h("Score: ",8,20),this.livesLabel=new h("Lives: ",this.canvas.width-65,20),this.rightPressed=!1,this.leftPressed=!1,this.setup(),this.draw()}setup(){this.livesLabel.value=3,document.addEventListener("keydown",(t=>{this.keyDownHandler(t)})),document.addEventListener("keyup",(t=>{this.keyUpHandler(t)})),document.addEventListener("mousemove",this.mouseMoveHandler.bind(this))}collisionDetection(){for(let t=0;t<this.bricks.cols;t+=1)for(let s=0;s<this.bricks.rows;s+=1){const i=this.bricks.bricks[t][s];1===i.status&&this.ball.x>i.x&&this.ball.x<i.x+this.bricks.width&&this.ball.y>i.y&&this.ball.y<i.y+this.bricks.height&&(this.ball.dy=-this.ball.dy,i.status=0,this.scoreLabel.value+=1,this.scoreLabel.value===this.bricks.cols*this.bricks.rows&&(alert(this.winMessage),document.location.reload()))}}collisionPaddle(){this.ball.y+this.ball.dy<this.ball.radius?this.ball.dy=-this.ball.dy:this.ball.y+this.ball.dy>this.canvas.height-this.ball.radius&&(this.ball.x+this.paddle.x&&this.ball.x<this.paddle.x+this.paddle.width?this.ball.dy=-this.ball.dy:(this.livesLabel.value-=1,0===this.livesLabel.value?(alert(this.gameOverMessage),document.location.reload()):(this.ball.x=this.canvas.width/2,this.ball.y=this.canvas.height-30,this.ball.dx=2,this.ball.dy=-2,this.paddle.x=this.paddleXStart)))}keyDownHandler(t){t.key===this.RIGHT||t.key===this.ARROW_RIGHT?this.rightPressed=!0:t.key!==this.LEFT&&t.key!==this.ARROW_LEFT||(this.leftPressed=!0)}keyUpHandler(t){t.key===this.RIGHT||t.key===this.ARROW_RIGHT?this.rightPressed=!1:t.key!==this.LEFT&&t.key!==this.ARROW_LEFT||(this.leftPressed=!1)}mouseMoveHandler(t){const s=t.clientX-this.canvas.offsetLeft;s>0&&s<this.canvas.width&&this.paddle.moveTo(s-this.paddle.width/2,this.paddle.y)}checkKeys(){this.rightPressed?(this.paddle.x+=7,this.paddle.x+this.paddle.width>this.canvas.width&&(this.paddle.x=this.canvas.width-this.paddle.width)):this.leftPressed&&(this.paddle.x-=7,this.paddle.x<0&&(this.paddle.x=0))}draw(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.bricks.render(this.ctx),this.ball.render(this.ctx),this.paddle.render(this.ctx),this.scoreLabel.render(this.ctx),this.livesLabel.render(this.ctx),this.ball.move(),this.collisionPaddle(),this.checkKeys(),this.collisionDetection(),this.ball.x+=this.ball.dx,this.ball.y+=this.ball.dy,requestAnimationFrame((()=>{this.draw()}))}}("myCanvas")})();